---
description: 
globs: 
alwaysApply: true
---
# Regla: lead-capturing-api.mdc

## üéØ Prop√≥sito
Dise√±ar una API segura, validada y escalable para capturar formularios de contacto o cotizaci√≥n desde un sitio web. La API debe validar los datos, extraer informaci√≥n contextual (como comuna/ciudad), y enviar el resultado a un servicio externo mediante webhook (ej: Make.com).

---

## üîç Estructura del formulario (Frontend)

### 1. ‚ú® Datos de contacto
- **Nombre**: string (requerido)
- **Apellido**: string (requerido)
- **Email**: string (email v√°lido, requerido)
- **Tel√©fono**: string (solo 9 d√≠gitos num√©ricos, sin c√≥digo pa√≠s, requerido)

### 2. üè¢ Informaci√≥n de empresa o proyecto
- **Empresa**: string (requerido)
- **Sitio web**: url (requerido)

### 3. üí¨ Detalle del requerimiento
- Campo largo de texto (requerido)

---

## üîÅ Backend API (FastAPI o Express.js)

### Endpoint:
```http
POST /api/contacto

Validaciones requeridas:
	‚Ä¢	Email v√°lido (RFC est√°ndar)
	‚Ä¢	Tel√©fono: ^\d{9}$
	‚Ä¢	Industria debe estar en el listado permitido
	‚Ä¢	Direcci√≥n debe incluir comuna y ciudad extra√≠das v√≠a Google Maps API

‚∏ª

‚öôÔ∏è Comportamiento esperado
	1.	Validar los datos en el backend
	2.	Enviar un POST a webhook externo (ej. Make.com, CRM, Sheets, etc.)
	3.	Retornar respuesta JSON: { "status": "ok" }

üì§ Payload enviado por Webhook
{
  "nombre": "Carlos",
  "apellido": "Soto",
  "email": "carlos@empresa.cl",
  "telefono": "987654321",
  "empresa": "Mi Empresa",
  "sitio_web": "https://empresa.cl",
  "detalle": "Queremos integrar nuestros sistemas internos y automatizar procesos."
}

üß∞ Tecnolog√≠as Recomendadas
	‚Ä¢	Backend:
	‚Ä¢	FastAPI + Pydantic (Python)
	‚Ä¢	Express.js + Yup (Node.js)
	‚Ä¢	Integraci√≥n externa: axios o fetch para enviar webhook

‚∏ª

üõ†Ô∏è Reglas para Cursor (Frontend + Backend)
	‚Ä¢	Frontend con React + TailwindCSS
	‚Ä¢	Validaci√≥n con React Hook Form + Yup
	‚Ä¢	Env√≠o con fetch() o axios al backend
	‚Ä¢	Mostrar mensaje de √©xito / error con feedback UX
	‚Ä¢	P√°gina accesible v√≠a /cotizar o /contacto
	‚Ä¢	Preparado para integraci√≥n con tracking de conversiones (GA4, Meta Pixel)
	‚Ä¢	Componentes reutilizables (<CotizarForm />) y c√≥digo desacoplado

  