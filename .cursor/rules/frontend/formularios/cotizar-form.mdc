---
description: 
globs: 
alwaysApply: true
---
# Regla: cotizar-form.mdc

## ğŸ¯ PropÃ³sito  
Formularios de cotizaciÃ³n reutilizables con validaciÃ³n, integrados al sistema de leads vÃ­a Make.com.  
Permiten capturar datos clave de potenciales clientes desde cualquier landing o pÃ¡gina del sitio.

---

## ğŸ“ Ruta esperada del componente  
`/components/form/CotizarForm.tsx`

---

## ğŸ§© Campos requeridos

1. **Nombre**
2. **Apellido**
3. **Email** (validado)
4. **Celular** (exactamente 9 dÃ­gitos sin +56)
5. **Empresa**
6. **DirecciÃ³n** (autocompletado con Google Maps)
   - Debe extraer automÃ¡ticamente:  
     - Comuna (`administrative_area_level_3`)  
     - Ciudad (`locality`)
7. **Industria** (selector)
8. **PÃ¡gina Web**
9. **Detalle** (textarea largo)

---

## âœ… Validaciones esperadas

- Todos los campos requeridos
- Email vÃ¡lido (`email`)
- Celular con regex: `^\d{9}$`
- PÃ¡gina web: URL vÃ¡lida
- DirecciÃ³n con validaciÃ³n y parsing de Google Maps
- Industria seleccionada de lista cerrada

---

## ğŸ“¤ EnvÃ­o del formulario

- MÃ©todo: `POST`
- Endpoint: `/api/contacto`
- Webhook Make:  
  `https://hook.us1.make.com/230cn8ic3ifsa2uqqo7p6aiq9mmx341x`

```ts
// Payload del webhook
{
  "nombre": "Carlos",
  "apellido": "Soto",
  "email": "carlos@gard.cl",
  "celular": "987654321",
  "empresa": "Gard Security",
  "direccion": "Camino Los Trapenses 2140, Santiago",
  "comuna": "Lo Barnechea",
  "ciudad": "Santiago",
  "pagina_web": "https://gard.cl",
  "industria": "Retail y Centros Comerciales",
  "detalle": "Necesitamos guardias para 2 instalaciones."
}

ğŸ§  IntegraciÃ³n con Google Maps
	â€¢	Utilizar Google Places Autocomplete para el campo direcciÃ³n
	â€¢	Extraer city y comuna automÃ¡ticamente al seleccionar una direcciÃ³n
	â€¢	Puede usarse react-places-autocomplete o API directa de Maps

â¸»

ğŸ“ UI/UX
	â€¢	DiseÃ±o mobile-first
	â€¢	SecciÃ³n clara en la landing /cotizar
	â€¢	Inputs redondeados, campos agrupados visualmente
	â€¢	Validaciones inline
	â€¢	Mensaje de Ã©xito: âœ… â€œHemos recibido tu solicitudâ€
	â€¢	Error de validaciÃ³n: âŒ â€œFaltan campos obligatoriosâ€
	â€¢	Incluir CotizarButton opcional como CTA adicional

â¸»

ğŸ› ï¸ Reglas Cursor
	â€¢	El formulario debe estar en /components/form/CotizarForm.tsx
	â€¢	Usar React Hook Form + Zod para validaciones
	â€¢	Conectarse a /api/contacto vÃ­a fetch o axios
	â€¢	Enviar datos al webhook de Make automÃ¡ticamente
	â€¢	Mostrar feedback visual (loading, Ã©xito, error)
	â€¢	Sin dependencias innecesarias (ligero y rÃ¡pido)
	â€¢	Compatible con seguimiento de conversiones (data-analytics="form-cotizar")

â¸»

ğŸ“ˆ RelaciÃ³n con otras reglas
	â€¢	Complementa: lead-capturing-api.mdc
	â€¢	Depende de: imagenes.mdc para Ã­conos o ilustraciones
	â€¢	Se usa en: /app/cotizar/page.tsx